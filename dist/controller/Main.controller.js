sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageToast","sap/m/MessageBox","sap/ui/export/library","sap/ui/core/Fragment","sap/ui/export/Spreadsheet"],function(e,t,i,o,r,a,l,n){"use strict";var s=a.EdmType;return e.extend("com.solvia.project4.controller.Main",{onInit:function(){var e=this.getOwnerComponent().getModel("globalModel");var t=this.getOwnerComponent().getModel("myOdataModel");var i=this.byId("idDownload");var o=this.byId("idSil");o.addStyleClass("pinkButton");var r=this.byId("idEdit");r.addStyleClass("pinkButton");var a=[{key:"",text:"Bir Fakülte Seçiniz"},{key:"Mühendislik",text:"Mühendislik"},{key:"Tıp Fakültesi",text:"Tıp Fakültesi"},{key:"Havacılık",text:"Havacılık"},{key:"Teknoloji ",text:"Teknoloji"},{key:"Sağlık Bilimleri",text:"Sağlık Bilimleri"},{key:"İşletme",text:"İşletme"},{key:"İlahiyat",text:"İlahiyat"},{key:"Mimarlık",text:"Mimarlık"},{key:"Hukuk",text:"Hukuk"},{key:"Eczacılık",text:"Eczacılık"}];e.setProperty("/FakulteList",a);this.onGetData();this.sSearchQuery=0},onGetData:function(e){var t=this.getOwnerComponent().getModel("myOdataModel");var i=this.getOwnerComponent().getModel("globalModel");t.read("/ogrenciListSet",{success:function(e){debugger;i.setProperty("/List",e.results)},error:function(e){o.show("Error!")}})},onChange:function(e){var t=this.getOwnerComponent().getModel("globalModel");var i=e.getParameter("selectedItem").getBindingContext("globalModel").getPath();var o=t.getProperty(i);var r=this.getView().byId("selectId");var a=r.getSelectedKey()},onRefresh:function(){this.getView().byId("idAd").setValue("");this.getView().byId("idSoyad").setValue("");this.getView().byId("idFakulte").setSelectedKey("");this.getView().byId("idBolum").setValue("");this.onRefreshValueState()},onMessageBox(){debugger;var e=this;r.warning("Silmek İstediğinize Emin Misiniz?",{actions:[r.Action.OK,r.Action.CANCEL],emphasizedAction:r.Action.OK,onClose:function(t){if(t==="OK"){e.onDelete();o.show("Seçilen Kişi Silindi")}}})},onDeleteFinal(){var e=this.byId("idStudents").getSelectedItem();if(e!==null){this.onMessageBox()}else{o.show("Bir Veri Seçiniz!!")}},onDelete:function(e){var t=this;var i,o=this.byId("idStudents").getSelectedItem();var a=o.getBindingContext("globalModel").getObject();var l=this.getOwnerComponent().getModel("myOdataModel");l.remove("/ogrenciListSet('"+a.OgrNo+"')",{method:"DELETE",success:function(e){t.onGetData();r("success")},error:function(e){r("error")}})},createColumnConfig:function(){var e=[];e.push({label:"Öğrenci Numarası",property:["OgrNo"],type:s.Number});e.push({label:"İsim",type:s.String,property:"Isim"});e.push({label:"Soyisim",property:"Soyisim",type:s.String});e.push({label:"Fakülte",property:"Fakulte",type:s.String});e.push({label:"Bölüm",property:"Bolum",type:s.String,width:30});return e},onExport:function(){var e,t,i,o,r;if(!this._oTable){this._oTable=this.byId("idStudents")}r=this._oTable;t=r.getBinding("items");e=this.createColumnConfig();i={workbook:{columns:e,hierarchyLevel:"Level"},dataSource:t,fileName:"Table export sample.xlsx",worker:false};o=new n(i);o.build().finally(function(){o.destroy()})},onOpenDialog:function(){var e;var t;var i;var r=this.byId("idStudents").getSelectedItem();if(r!==null){if(!this.pDialog){this.pDialog=l.load({name:"com.solvia.project4.view.edit",controller:this})}this.pDialog.then(function(o){o.open();e=this.byId("idStudents").getSelectedItem().getBindingContext("globalModel").getPath();t=this.byId("idStudents").getSelectedItem().getBindingContext("globalModel").getModel();i=t.getProperty(e);i=JSON.parse(JSON.stringify(i));t.setProperty("/selectedLine",i);o.setModel(t,"globalModel");this.oDialog=o;debugger}.bind(this))}else{o.show("Lütfen Bir Seçim Yapınız!")}},onCloseDialog:function(e){this.oDialog.close();debugger},onUpdateDialog:function(e){var t=this.getOwnerComponent().getModel("globalModel");var i=this.getOwnerComponent().getModel("myOdataModel");var o=this;var a=sap.ui.getCore().byId("idAdEdit").mProperties.value.trim();var l=sap.ui.getCore().byId("idSoyadEdit").mProperties.value.trim();var n=sap.ui.getCore().byId("idFakulteEdit").getSelectedKey();var s=sap.ui.getCore().byId("idBolumEdit").mProperties.value.trim();if(a===""||l===""||n===""||s===""){r.warning("Zorunlu Alanları Doldurun!");if(a===""){sap.ui.getCore().byId("idAdEdit").setValueState("Error")}if(l===""){sap.ui.getCore().byId("idSoyadEdit").setValueState("Error")}if(n===""){sap.ui.getCore().byId("idFakulteEdit").setValueState("Error")}if(s===""){sap.ui.getCore().byId("idBolumEdit").setValueState("Error")}return}else{var d={};d.Isim=a;d.Soyisim=l;d.Fakulte=n;d.Bolum=s;var o=this;var u=this.byId("idStudents").getSelectedItem();var g=u.getBindingContext("globalModel").getObject();d.OgrNo=g.OgrNo;var i=this.getOwnerComponent().getModel("myOdataModel");i.update("/ogrenciListSet('"+d.OgrNo+"')",d,{method:"PUT",success:function(e){o.oDialog.close();o.onGetData();o.onRefresh();r.success("success")},error:function(e){r.error("error")}})}},onNewOpenDialog:function(){var e;this.getView().byId("idStudents").removeSelections();if(!this.aDialog){this.aDialog=l.load({name:"com.solvia.project4.view.new",controller:this})}this.aDialog.then(function(e){e.open();var t=this.getOwnerComponent().getModel("globalModel");e.setModel(t);this.oDialog=e;debugger}.bind(this))},onSaveInsideButtonNew:function(e){var t=this.getOwnerComponent().getModel("globalModel");var i=this.getOwnerComponent().getModel("myOdataModel");var a=this;var l=sap.ui.getCore().byId("idAd").mProperties.value.trim();var n=sap.ui.getCore().byId("idSoyad").mProperties.value.trim();var s=sap.ui.getCore().byId("idFakulte").getSelectedKey();var d=sap.ui.getCore().byId("idBolum").mProperties.value.trim();if(l===""||n===""||s===""||d===""){r.warning("Zorunlu Alanları Doldurun!");if(l===""){sap.ui.getCore().byId("idAd").setValueState("Error")}if(n===""){sap.ui.getCore().byId("idSoyad").setValueState("Error")}if(s===""){sap.ui.getCore().byId("idFakulte").setValueState("Error")}if(d===""){sap.ui.getCore().byId("idBolum").setValueState("Error")}return}else{var u={};u.Isim=l;u.Soyisim=n;u.Fakulte=s;u.Bolum=d;i.create("/ogrenciListSet",u,{success:function(e){var t=e.Type;if(t==="S")debugger;o.show("Başarıyla Kaydedildi");a.onGetData();a.onRefreshNew();a.onCloseDialogButtonNew();a.onRefreshValueState()},error:function(e){r.error("error");debugger}})}},onCloseDialogButtonNew:function(){this.oDialog.close()},onRefreshNew:function(){sap.ui.getCore().byId("idAd").setValue("");sap.ui.getCore().byId("idSoyad").setValue("");sap.ui.getCore().byId("idFakulte").setSelectedKey("");sap.ui.getCore().byId("idBolum").setValue("");this.onRefreshValueState()},onRefreshValueState:function(e){sap.ui.getCore().byId("idAd").setValueState("None");sap.ui.getCore().byId("idSoyad").setValueState("None");sap.ui.getCore().byId("idFakulte").setValueState("None");sap.ui.getCore().byId("idBolum").setValueState("None")},fnApplyFiltersAndOrdering:function(e){var o=[];if(this.sSearchQuery){var r=new t("Isim",i.Contains,this.sSearchQuery);o.push(r)}this.byId("idStudents").getBinding("items").filter(o).sort(aSorters)},onFilter:function(e){this.sSearchQuery=e.getSource().getValue();this.fnApplyFiltersAndOrdering()}})});
//# sourceMappingURL=Main.controller.js.map